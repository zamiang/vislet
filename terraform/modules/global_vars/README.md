## Providers

| Name                                             | Version |
| ------------------------------------------------ | ------- |
| <a name="provider_aws"></a> [aws](#provider_aws) | n/a     |

## Resources

| Name                                                                                                                          | Type        |
| ----------------------------------------------------------------------------------------------------------------------------- | ----------- |
| [aws_caller_identity.current](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/caller_identity) | data source |

## Inputs

| Name                                                                                                                                    | Description                                                               | Type                | Default                                                                                              | Required |
| --------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------- | ------------------- | ---------------------------------------------------------------------------------------------------- | :------: |
| <a name="input_airflow_app_policy_path"></a> [airflow_app_policy_path](#input_airflow_app_policy_path)                                  | Airflow app policy path on local filesystem                               | `string`            | `"../airflow-iam-policy.tpl"`                                                                        |    no    |
| <a name="input_airflow_dags_s3_bucket_name"></a> [airflow_dags_s3_bucket_name](#input_airflow_dags_s3_bucket_name)                      | Bucket where airflow DAGS, plugins, and requirements.txt are loaded from  | `map(string)`       | <pre>{<br> "dev": null,<br> "prod": null<br>}</pre>                                                  |    no    |
| <a name="input_airflow_environment_name"></a> [airflow_environment_name](#input_airflow_environment_name)                               | Define the Airflow environment name                                       | `string`            | `null`                                                                                               |    no    |
| <a name="input_airflow_iam_description"></a> [airflow_iam_description](#input_airflow_iam_description)                                  | Description of the IAM role                                               | `string`            | `"Airflow execution role"`                                                                           |    no    |
| <a name="input_airflow_iam_name"></a> [airflow_iam_name](#input_airflow_iam_name)                                                       | Name of the IAM role to create                                            | `map(string)`       | <pre>{<br> "dev": "airflow-iam-policy-dev",<br> "prod": "airflow-iam-policy-prod"<br>}</pre>         |    no    |
| <a name="input_airflow_principal_identifiers"></a> [airflow_principal_identifiers](#input_airflow_principal_identifiers)                | Value for sts assume role principals                                      | `list(string)`      | <pre>[<br> "airflow.amazonaws.com",<br> "airflow-env.amazonaws.com"<br>]</pre>                       |    no    |
| <a name="input_airflow_security_group_description"></a> [airflow_security_group_description](#input_airflow_security_group_description) | Description of the Airflow security group                                 | `string`            | `"Security Group for Amazon MWAA Environment"`                                                       |    no    |
| <a name="input_airflow_security_group_name"></a> [airflow_security_group_name](#input_airflow_security_group_name)                      | Name of the Airflow security group                                        | `map(string)`       | <pre>{<br> "dev": "airflow-security-group-dev",<br> "prod": "airflow-security-group-prod"<br>}</pre> |    no    |
| <a name="input_airflow_subnet_id_list"></a> [airflow_subnet_id_list](#input_airflow_subnet_id_list)                                     | Default AWS subnet IDs to use for airflow                                 | `map(list(string))` | <pre>{<br> "dev": [],<br> "prod": []<br>}</pre>                                                      |    no    |
| <a name="input_airflow_vpc_name"></a> [airflow_vpc_name](#input_airflow_vpc_name)                                                       | Default AWS VPC name to use for airflow                                   | `map(string)`       | <pre>{<br> "dev": null,<br> "prod": null<br>}</pre>                                                  |    no    |
| <a name="input_data_service_tag"></a> [data_service_tag](#input_data_service_tag)                                                       | Override default service tag for data buckets and queues                  | `string`            | `null`                                                                                               |    no    |
| <a name="input_environment_tag"></a> [environment_tag](#input_environment_tag)                                                          | Default environment tag                                                   | `map(string)`       | <pre>{<br> "dev": "development",<br> "prod": "production"<br>}</pre>                                 |    no    |
| <a name="input_logstream_app_policy_path"></a> [logstream_app_policy_path](#input_logstream_app_policy_path)                            | Cloudwatch to Kinesis app policy path on local filesystem                 | `string`            | `"../airflow-logstream-iam-policy.tpl"`                                                              |    no    |
| <a name="input_logstream_iam_description"></a> [logstream_iam_description](#input_logstream_iam_description)                            | Description of the logstream IAM role                                     | `string`            | `"Allow sending Cloudwatch logs to Kinesis data streams"`                                            |    no    |
| <a name="input_logstream_iam_name"></a> [logstream_iam_name](#input_logstream_iam_name)                                                 | Name of the IAM role to create allowing Cloudwatch to Kinesis log streams | `string`            | `"airflow-logstream-iam-policy"`                                                                     |    no    |
| <a name="input_logstream_principal_identifiers"></a> [logstream_principal_identifiers](#input_logstream_principal_identifiers)          | Cloudwatch sts assume role principals                                     | `list(string)`      | <pre>[<br> "delivery.logs.amazonaws.com",<br> "logs.amazonaws.com"<br>]</pre>                        |    no    |
| <a name="input_product_tag"></a> [product_tag](#input_product_tag)                                                                      | Default product tag                                                       | `string`            | `"security"`                                                                                         |    no    |
| <a name="input_region"></a> [region](#input_region)                                                                                     | Default region for the AWS provider                                       | `map(string)`       | <pre>{<br> "dev": "us-east-1",<br> "prod": "us-east-1"<br>}</pre>                                    |    no    |
| <a name="input_s3_bucket_names"></a> [s3_bucket_names](#input_s3_bucket_names)                                                          | List of bucket names to be used as DAG outputs                            | `map(list(string))` | <pre>{<br> "dev": [],<br> "prod": []<br>}</pre>                                                      |    no    |
| <a name="input_service_tag"></a> [service_tag](#input_service_tag)                                                                      | Default service tag                                                       | `string`            | `"airflow"`                                                                                          |    no    |
| <a name="input_ssm_parameter_path"></a> [ssm_parameter_path](#input_ssm_parameter_path)                                                 | SSM parameter store root path for reading secrets                         | `string`            | `null`                                                                                               |    no    |
| <a name="input_stage"></a> [stage](#input_stage)                                                                                        | Define the lifecycle stage. dev or prod as examples                       | `string`            | n/a                                                                                                  |   yes    |
| <a name="input_team_tag"></a> [team_tag](#input_team_tag)                                                                               | Default team tag                                                          | `string`            | `null`                                                                                               |    no    |

## Outputs

| Name                                                                                                                                      | Description                                               |
| ----------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------- |
| <a name="output_account_id"></a> [account_id](#output_account_id)                                                                         | Value of current account ID                               |
| <a name="output_airflow_dags_s3_bucket_name"></a> [airflow_dags_s3_bucket_name](#output_airflow_dags_s3_bucket_name)                      | Value from airflow_dags_s3_bucket_name as type = string   |
| <a name="output_airflow_environment_name"></a> [airflow_environment_name](#output_airflow_environment_name)                               | Value from airflow_environment_name as type = string      |
| <a name="output_airflow_iam_description"></a> [airflow_iam_description](#output_airflow_iam_description)                                  | Value from airflow_iam_description as type = string       |
| <a name="output_airflow_iam_name"></a> [airflow_iam_name](#output_airflow_iam_name)                                                       | Value from airflow_iam_name as type = string              |
| <a name="output_airflow_principal_identifiers"></a> [airflow_principal_identifiers](#output_airflow_principal_identifiers)                | Value for sts assume role principals as type = list       |
| <a name="output_airflow_rendered_app_policy"></a> [airflow_rendered_app_policy](#output_airflow_rendered_app_policy)                      | Value from airflow_app_policy_path as rendered template   |
| <a name="output_airflow_security_group_description"></a> [airflow_security_group_description](#output_airflow_security_group_description) | Description of the Airflow security group                 |
| <a name="output_airflow_security_group_name"></a> [airflow_security_group_name](#output_airflow_security_group_name)                      | Name of the Airflow security group                        |
| <a name="output_airflow_subnet_id_list"></a> [airflow_subnet_id_list](#output_airflow_subnet_id_list)                                     | Value from airflow_subnet_id_list as type = list          |
| <a name="output_airflow_vpc_name"></a> [airflow_vpc_name](#output_airflow_vpc_name)                                                       | Value from airflow_vpc map as type = string               |
| <a name="output_caller_arn"></a> [caller_arn](#output_caller_arn)                                                                         | Value of current user ARN                                 |
| <a name="output_caller_user"></a> [caller_user](#output_caller_user)                                                                      | Value of current user ID                                  |
| <a name="output_data_service_tag"></a> [data_service_tag](#output_data_service_tag)                                                       | Value from data_service_tag as type = string              |
| <a name="output_environment_tag"></a> [environment_tag](#output_environment_tag)                                                          | Value from environment_tag map as type = string           |
| <a name="output_logstream_iam_description"></a> [logstream_iam_description](#output_logstream_iam_description)                            | Value from logstream_iam_description as type = string     |
| <a name="output_logstream_iam_name"></a> [logstream_iam_name](#output_logstream_iam_name)                                                 | Value from logstream_iam_name as type = string            |
| <a name="output_logstream_principal_identifiers"></a> [logstream_principal_identifiers](#output_logstream_principal_identifiers)          | Value for sts assume role principals as type = list       |
| <a name="output_logstream_rendered_app_policy"></a> [logstream_rendered_app_policy](#output_logstream_rendered_app_policy)                | Value from logstream_app_policy_path as rendered template |
| <a name="output_product_tag"></a> [product_tag](#output_product_tag)                                                                      | Value from product_tag as type = string                   |
| <a name="output_region"></a> [region](#output_region)                                                                                     | Value from region map as type = string                    |
| <a name="output_s3_bucket_name"></a> [s3_bucket_name](#output_s3_bucket_name)                                                             | Value from s3_bucket_name as type = string                |
| <a name="output_service_tag"></a> [service_tag](#output_service_tag)                                                                      | Value from service_tag as type = string                   |
| <a name="output_team_tag"></a> [team_tag](#output_team_tag)                                                                               | Value from team_tag as type = string                      |
